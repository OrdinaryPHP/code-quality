#!/usr/bin/env php
<?php

declare(strict_types=1);

use Ordinary\CodeQuality\InitConfig;

// phpcs:ignore SlevomatCodingStandard.Variables.DisallowSuperGlobalVariable.DisallowedSuperGlobalVariable
$argsSet = array_fill_keys($_SERVER['argv'] ?? [], true);

$help = isset($argsSet['--help']) || isset($argsSet['-h']);

if ($help) {
    $scriptName = basename(__FILE__);
    echo <<<HELP
Copy default config files to current directory

Usage: $scriptName init [--overwrite]

    Options:
      --overwrite) Overwrite existing config files

HELP;
    exit(0);
}

$init = isset($argsSet['init']);

$overwrite = isset($argsSet['--overwrite']);

/** @psalm-suppress UnresolvableInclude */
require_once $_composer_autoload_path ?? dirname(__DIR__) . '/vendor/autoload.php';

$init = new InitConfig();
$init->copyConfig($overwrite);
