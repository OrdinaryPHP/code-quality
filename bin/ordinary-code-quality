#!/usr/bin/env php
<?php
/** @var string[] $args */
$args = $_SERVER['argv'] ?? [];
$action = $args[1];

if($action !== 'init') {
    fwrite(\STDERR, "Argument 1 expected to be 'init'\n");
    exit(1);
}

$overwrite = in_array('overwrite', $args);
$help = in_array('help', $args);
$scriptName = basename(__FILE__);

if ($help) {
    echo <<<HELP
Copy default config files to current directory

Usage: $scriptName init [--overwrite]

    Options:
      --overwrite) Overwrite existing config files

HELP;
    exit(0);
}

/** @psalm-suppress UnresolvableInclude */
require_once $_composer_autoload_path ?? (dirname(__DIR__) . '/vendor/autoload.php');

$init = new \Ordinary\CodeQuality\InitConfig();
$init->copyConfig($overwrite);
